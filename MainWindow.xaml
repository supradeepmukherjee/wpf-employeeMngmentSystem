<Window x:Class="EmployeeWpfClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:EmployeeWpfClient.ViewModels"
        Title="Employee Management System" Height="500" Width="900">
    <Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>

    <Grid Margin="8">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0">
            <TextBlock Text="Departments" FontWeight="Bold" Margin="0 0 0 8" />
            <ListBox ItemsSource="{Binding Departments}"
                     SelectedItem="{Binding Department}"
                     DisplayMemberPath="Name"
                     Height="300" />
            <StackPanel Orientation="Horizontal" Margin="0 8 0 0">
                <Button Content="Reload" Width="80" Margin="0 0 8 0" Command="{Binding LoadCommand}" />
				<TextBox Width="200"
         Margin="5"
         Text="{Binding NewDepartment, UpdateSourceTrigger=PropertyChanged}" />
                <Button Content="Add Dept" Width="80" Command="{Binding AddDepartmentCommand}" />
            </StackPanel>
            <TextBlock Text="Selected Dept:" Margin="0 12 0 0"/>
            <TextBlock Text="{Binding Department.Name}" FontWeight="Bold"/>
        </StackPanel>

        <!-- Right: Employees & actions -->
        <StackPanel Grid.Column="1" Margin="12,0,0,0">
            <TextBlock Text="Employees" FontWeight="Bold"/>
            <DataGrid ItemsSource="{Binding EmployeesOfSelectedDept}" 
                      SelectedItem="{Binding Employee}"
                      AutoGenerateColumns="False" Height="300" Margin="0 8 0 0">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding EmployeeId}" Width="60"/>
                    <DataGridTextColumn Header="First" Binding="{Binding FirstName}" Width="*"/>
                    <DataGridTextColumn Header="Last" Binding="{Binding LastName}" Width="*"/>
                    <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>

			<StackPanel Orientation="Horizontal" Margin="0 6 0 0">
				<TextBox Width="150"
         Margin="5"
         ToolTip="First"
         Text="{Binding EmployeeFirstName, UpdateSourceTrigger=PropertyChanged}" />

				<TextBox Width="150"
						 Margin="5"
						 ToolTip="Last"
						 Text="{Binding EmployeeLastName, UpdateSourceTrigger=PropertyChanged}" />

				<TextBox Width="200"
						 Margin="5"
						 ToolTip="Email"
						 Text="{Binding EmployeeEmail, UpdateSourceTrigger=PropertyChanged}" />
				<Button Content="Add Employee" Width="100" Margin="0 0 8 0" Command="{Binding AddEmployeeCommand}"/>
				<Button Content="Delete Employee" Width="100" Margin="0 0 8 0" Command="{Binding DeleteEmployeeCommand}"/>
			</StackPanel>
			<StackPanel>
				<TextBox Width="200"
						 Margin="5"
						 Text="{Binding NewProjectTitle, UpdateSourceTrigger=PropertyChanged}"
						 ToolTip="Project Title" />

				<TextBox Width="300"
						 Margin="5"
						 Text="{Binding NewProjectDescription, UpdateSourceTrigger=PropertyChanged}"
						 ToolTip="Project Description" />
                <Button Content="Create Project + Assign" Width="150" Margin="0 0 8 0" Command="{Binding CreateProjectAndAssignCommand}"/>
                <Button Content="Remove Assignment" Width="120" Command="{Binding RemoveAssignmentCommand}"/>
            </StackPanel>

            <Border BorderBrush="Gray" BorderThickness="1" Margin="0 10 0 0" Padding="8">
                <StackPanel>
                    <TextBlock Text="Selected Employee Details" FontWeight="Bold" Margin="0 0 0 8" />
                    <TextBlock Text="{Binding Employee.FirstName}" />
                    <TextBlock Text="{Binding Employee.LastName}" />
                    <TextBlock Text="{Binding Employee.Email}" />
                    <TextBlock Text="Projects:" FontWeight="Bold" Margin="0 8 0 0" />
                    <ItemsControl ItemsSource="{Binding Employee.Projects}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Title}" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</Window>